# Contributing to trizum

Thank you for your interest in contributing to trizum! This document provides guidelines and instructions for contributing.

## Code of Conduct

Please read and follow our [Code of Conduct](./CODE_OF_CONDUCT.md).

## Getting Started

See the [README](./README.md#-getting-started) for prerequisites, installation, and development setup.

## How to Contribute

### Start with Issues

Before writing code, **check the [issues](https://github.com/HorusGoul/trizum/issues) first**. This helps avoid duplicate work and ensures your contribution aligns with the project's direction.

**Issue labels to look for:**

| Label              | Description                        |
| ------------------ | ---------------------------------- |
| `good first issue` | Great for newcomers to the project |
| `help wanted`      | We'd love help with these          |
| `bug`              | Something isn't working            |
| `feature`          | New feature requests               |

### Contribution Types

**Small fixes** (typos, minor bugs, small improvements):

- You can open a PR directly
- Check if an issue exists and link it if so

**Bug reports**:

- Use the bug report template when opening an issue
- Include reproduction steps, expected vs actual behavior

**New features or larger changes**:

1. Open an issue describing what you want to build
2. Wait for feedback and approval before starting work
3. Discuss the approach in the issue
4. Get assigned to the issue

Building a proof-of-concept to support your idea is welcome, but it doesn't guarantee the feature will be accepted or merged.

### Claiming Issues

**Smaller issues**: Comment that you'd like to work on it and start.

**Larger issues**: Discuss the approach first, then ask to be assigned before beginning significant work.

**Stale issues**: If an issue has been open for a while, it's probably still relevant. When in doubt, ask in a comment.

### Be Patient

This project is currently maintained by one person. Response times may vary â€” please be patient, and your contribution will be reviewed as soon as possible.

### AI Usage

**Code**: AI-generated code is acceptable, but we expect you to review and understand any code generated by AI tools before submitting. You are responsible for the quality and correctness of your contribution.

**Assets** (images, logos, icons, etc.): AI-generated assets are **not accepted**.

**Translations / Copy**: AI assistance is fine as long as you review the output and are confident it's correct. For example, if you're adding Spanish translations, we expect you to know Spanish. If you're unsure about some translations, just add the new copy in English and we'll figure out the rest.

## Development Workflow

### Making Changes

1. **Create a branch** from `main`
2. **Make your changes** following the code style guidelines below
3. **Test your changes** locally
4. **Run checks** before committing:

```bash
pnpm lint        # Check for linting errors
pnpm typecheck   # Verify TypeScript types
pnpm test        # Run tests
```

### Commit Messages

Write clear, descriptive commit messages:

```
Add expense splitting by percentage

- Implement percentage-based splitting logic
- Add UI for percentage input
- Update expense model with percentage field
```

## Code Style Guidelines

### TypeScript

All code must be written in TypeScript. No JavaScript files.

### React Patterns

**Do:**

- Use React Suspense for async operations
- Use React Transitions for UI updates
- Follow the [Rules of React](https://react.dev/reference/rules)
- Prefer React-first libraries

**Avoid:**

- `useMemo`, `memo`, and `useCallback` â€” React Compiler handles optimization
- Non-React libraries when React alternatives exist

### Styling

Use Tailwind CSS with the project's color system:

```tsx
// Use accent color variants
<div className="bg-accent-50 dark:bg-accent-950 text-accent-900 dark:text-accent-100">
  Content
</div>
```

**Color variants:** `accent-50` through `accent-950`  
**Semantic colors:** `danger`, `success`, `warning`  
**Dark mode:** Always define with `dark:` prefix

### Internationalization

All user-facing strings must use Lingui:

```tsx
import { Trans } from "@lingui/macro";
import { t } from "@lingui/macro";

// JSX content
<Trans>Hello, world!</Trans>;

// String values
const placeholder = t`Enter your name`;
```

After adding strings, run:

```bash
pnpm lingui:extract
```

For translation guidelines, see [`packages/pwa/locale/AGENTS.md`](./packages/pwa/locale/AGENTS.md).

### Component Organization

| Directory         | Purpose                                            |
| ----------------- | -------------------------------------------------- |
| `src/ui/`         | Design system components (buttons, inputs, modals) |
| `src/components/` | Application-specific components                    |
| `src/routes/`     | Route/page components (TanStack Router)            |
| `src/hooks/`      | Custom React hooks                                 |
| `src/lib/`        | Utility functions and helpers                      |
| `src/models/`     | Automerge document types and schemas               |

**Co-location is encouraged** â€” keep related files close to where they're used.

## Testing

### Philosophy

- **Unit tests** for business logic, especially expense calculations
- **Integration tests** for critical user flows
- No strict coverage target, but expense calculations must be tested

### Running Tests

```bash
pnpm test              # Run tests
pnpm test:coverage     # Run with coverage report
```

### Adding Tests

Tests use Vitest. Place test files next to the code they test:

```
src/models/expense.ts
src/models/expense.test.ts
```

## Pull Request Process

### Before Submitting

1. Ensure all checks pass:

```bash
pnpm lint && pnpm typecheck && pnpm test
```

2. Extract i18n strings if you added any:

```bash
pnpm lingui:extract
```

3. Update documentation if needed

### Changesets

We use [Changesets](https://github.com/changesets/changesets) to manage versioning and changelogs. When you open a PR, the **changeset bot** will comment asking if you need to add a changeset.

- **Add a changeset** if your PR includes user-facing changes (features, fixes, etc.)
- **Skip the changeset** for internal changes (refactors, docs, tests)

To add a changeset:

```bash
pnpm changeset
```

Follow the prompts to describe your changes. This creates a file in `.changeset/` that should be included in your PR.

### PR Guidelines

- **Title:** Clear, descriptive summary of changes
- **Description:** Explain what and why, not just how
- **Size:** Keep PRs focused and reasonably sized â€” smaller PRs get reviewed faster!
- **Screenshots:** Include for UI changes
- **Link issues:** Reference related issues (e.g., "Fixes #123")

### Draft PRs

For new features or large changes, consider opening a **draft PR** early to get feedback on your approach before investing too much time.

### Review Process

- PRs require review before merging
- Address feedback promptly
- Be open to suggestions and discussion

## Questions?

- Check the [README](./README.md) for project overview
- Review [AGENTS.md](./AGENTS.md) for detailed guidelines
- Open an issue for questions or discussions

---

Thank you for contributing to trizum! ðŸŽ‰
